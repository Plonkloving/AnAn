
首先引入官方js库

    <link rel="stylesheet" href="https://js.arcgis.com/4.29/esri/themes/dark/main.css" />
    <script src="https://js.arcgis.com/4.29/"></script>

然后使用官方提供代码，记得要修改对应字段

    <script>
      require(["esri/Map", "esri/views/MapView", "esri/layers/FeatureLayer", "esri/widgets/Legend"], (
        Map,
        MapView,
        FeatureLayer,
        Legend
      ) => {
        const defaultSym = {
          type: "simple-marker", // autocasts as new SimpleMarkerSymbol()
          color: [0, 0, 0, 0],
          outline: {
            // autocasts as new SimpleLineSymbol()
            color: "#71de6e",
            width: 1
          }
        };

        //设置最终输出的样式
        const renderer = {
          type: "simple", // autocasts as new SimpleRenderer()
          symbol: defaultSym,
          visualVariables: [
            {
              type: "size",
              field: "magnitude",//字段
              normalizationField: "location",//字段
              legendOptions: {
                title: "地震等级"//标题
              },
              stops: [
                {
                  value: 0.15,
                  size: 4,
                  label: "<4.6",
           
                },
                {
                  value: 0.25,
                  size: 12,
                  label: "4.6",
                
                },
                {
                  value: 0.35,
                  size: 20,
                  label: ">5",
                 
                }
              ]
            }
          ]
        };

        const povLayer = new FeatureLayer({
          url:
            "https://services2.arcgis.com/j80Jz20at6Bi0thr/arcgis/rest/services/地震数据/FeatureServer/0",//修改成题目要求的要素图层的链接
          renderer: renderer,
          title: "地震数据",   //设置图例标题
          popupTemplate: {
            //设置弹窗
            title: "{location}, {magnitude}",//弹窗的第一行
            content: "{location}  的居民生活在这里.",
            fieldInfos: [
              {
                fieldName: "depth",//字段
                format: {
                  digitSeparator: true,
                  places: 0
                }
              },
              {
                fieldName: "year", //字段
                format: {
                  digitSeparator: true,
                  places: 0
                }
              }
            ]
          }
        });

        const map = new Map({
          basemap: "dark-gray-vector",
          layers: [povLayer]
        });

        const view = new MapView({
          container: "viewDiv",
          map: map,
          center: [120.0502, 33.125524],//这里中心位置坐标需要修改
          zoom: 5
        });


        view.ui.add(
          new Legend({
            view: view
          }),
          "top-right"
        );
      });
    </script>

